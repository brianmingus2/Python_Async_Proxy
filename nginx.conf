
# Minimal upstream on :8080
user www-data;
worker_processes auto;
events { worker_connections 65535; multi_accept on; use epoll; }
worker_rlimit_nofile 1048576;

http {
    sendfile on;
    aio threads;
    tcp_nopush on;   # aligns with TCP_CORK
    tcp_nodelay on;
    keepalive_timeout 65s;
    keepalive_requests 100000;
    server_tokens off;
    open_file_cache max=200000 inactive=60s;
    open_file_cache_valid 120s;
    open_file_cache_min_uses 2;

    server {
        listen 8080 reuseport backlog=65535;
        location / {
            root /var/www/html;
            index index.html;
        }
    }
}
